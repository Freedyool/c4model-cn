---
layout: doc
title: FAQ
---

# 常见问题解答

## 线条应该表示依赖关系还是数据流？

这取决于你的选择。有时图表更适合显示依赖关系（例如，使用、读取等），有时数据流（例如，客户更新事件）更适合。无论你选择哪种方式，请确保线条的描述与箭头的方向匹配。

同样值得记住的是，大多数关系可以用任何一种方式表达，而且越明确越好。例如，将关系描述为“发送客户更新事件到”比简单地说“客户更新事件”更具描述性。

## 图表会很快过时吗？

由于C4模型的层次结构，每个图表的变化速度不同。

- **系统上下文图**: 在大多数情况下，系统上下文图的变化会非常缓慢，因为它描述了软件系统所处的环境。
- **容器图**: 除非你正在构建一个大量使用微服务或无服务器lambdas/函数等的软件系统，否则容器图的变化也会相对缓慢。
- **组件图**: 对于任何正在积极开发的软件系统，组件图可能会频繁变化，因为团队会添加、删除或重组代码以形成内聚的组件。
- **代码图**: 如果代码库正在积极开发，级别4的代码（例如类）图可能会非常快地过时。因此，建议（1）根本不创建它们，或（2）使用IDE等工具按需生成它们。

当然，上述情况仅适用于手动创建C4图表的情况。自动生成图表将确保它们始终保持最新并反映现实。可能的方法包括：

- **系统景观/上下文图**: 使用现有的系统/服务目录（例如Backstage、ServiceNow等）作为识别软件系统和关系的数据来源。
- **容器图**: 解析日志文件或使用OpenTelemetry数据作为识别微服务和关系的数据来源。
- **组件图**: 静态分析/逆向工程代码作为识别组件及其关系的数据来源。
- **部署图**: 解析“基础设施即代码”定义（例如Terraform、CloudFormation等）或逆向工程云环境配置作为识别部署元素的数据来源。

## C4模型与UML、ArchiMate和SysML的比较？

尽管已有UML、ArchiMate和SysML等现有符号，但许多软件开发团队似乎并不使用它们。通常这是因为团队对这些符号不够了解，认为它们太复杂，认为它们与敏捷方法不兼容或没有所需的工具。

如果你已经成功使用其中一种符号来沟通软件架构，并且效果很好，请继续使用它。如果没有，试试C4模型。如果需要，不要害怕用UML状态图、时序图等补充C4图表。

## 我们可以结合C4和arc42吗？

可以，许多团队都这样做，C4模型与[arc42文档模板](http://arc42.org)兼容，如下所示。

- 上下文和范围 => 系统上下文图
- 构建块视图（级别1） => 容器图
- 构建块视图（级别2） => 组件图
- 构建块视图（级别3） => 代码（例如类）图